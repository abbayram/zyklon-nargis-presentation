<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nargis â€“ Strategie Delta 2026</title>
    <style>
        :root {
            --bg-color: #050505;
            --terminal-green: #33ff33;
            --alert-red: #ff3333;
            --alert-orange: #ff9800;
            --ui-gray: #1a1a1a;
            --text-white: #d0d0d0;
            --highlight: #00bcd4;
            --gold: #ffd700;
            --role-btn-color: #5d4a4a; 
            --role-btn-border: #3d2a2a;
        }

        body {
            margin: 0;
            height: 100vh;
            background-color: var(--bg-color);
            color: var(--text-white);
            font-family: 'Courier New', Courier, monospace;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        #game-stage {
            width: 1000px;
            height: 750px;
            background: #0d0d0d;
            border: 1px solid #333;
            position: relative;
            box-shadow: 0 0 50px rgba(0,255,0,0.1);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .slide {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            padding: 50px;
            box-sizing: border-box;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.4s ease;
            background: #0d0d0d;
            z-index: 1;
        }
        .slide.active { display: flex; opacity: 1; z-index: 10; }

        h1 { text-transform: uppercase; letter-spacing: 4px; color: var(--terminal-green); text-align: center; margin-bottom: 25px;}

        .budget-header {
            font-size: 22px;
            color: var(--terminal-green);
            margin-bottom: 20px;
            padding: 10px;
            border: 1px solid var(--terminal-green);
            background: rgba(0, 255, 0, 0.05);
        }
        .budget-header.over {
            color: var(--alert-red);
            border-color: var(--alert-red);
            animation: flicker 0.2s infinite;
        }
        @keyframes flicker { 0% { opacity: 1; } 50% { opacity: 0.7; } 100% { opacity: 1; } }

        .btn {
            background: transparent;
            border: 1px solid var(--terminal-green);
            color: var(--terminal-green);
            padding: 12px 30px;
            font-size: 18px;
            font-family: inherit;
            cursor: pointer;
            margin-top: 20px;
            text-transform: uppercase;
        }
        .btn:hover:not(:disabled) { background: var(--terminal-green); color: black; }
        .btn:disabled { color: #333; border-color: #333; }
        .btn-gold { border-color: var(--gold); color: var(--gold); }

        .typewriter-text { color: var(--terminal-green); font-size: 19px; line-height: 1.6; width: 90%; min-height: 280px; }
        
        .role-card {
            background: var(--role-btn-color);
            border: 2px solid var(--role-btn-border);
            padding: 20px;
            width: 210px;
            cursor: pointer;
            color: white;
            text-align: center;
            transition: transform 0.2s;
        }
        .role-card:hover { transform: scale(1.05); }

        .budget-ui { width: 90%; background: #111; padding: 30px; border: 1px solid #222; }
        .slider-row { display: flex; align-items: center; margin-bottom: 20px; }
        .slider-label { width: 350px; font-size: 14px; text-transform: uppercase; }
        input[type=range] { flex-grow: 1; accent-color: var(--terminal-green); }
        .slider-val { width: 120px; text-align: right; color: var(--highlight); font-weight: bold; }

        #outcome-image { max-width: 90%; max-height: 50vh; border: 1px solid #333; margin-bottom: 15px; }
        #role-feedback { text-align: center; font-size: 16px; max-width: 80%; line-height: 1.4; }
        .ai-credit { position: absolute; bottom: 10px; right: 15px; font-size: 9px; color: #333; }
    </style>
</head>
<body>

<div id="game-stage">
    
    <div class="slide active" id="slide-intro">
        <div class="typewriter-text" id="intro-text"></div>
        <button class="btn" id="intro-btn" onclick="showSlide('slide-roles')" style="opacity:0; pointer-events: none;">>> SYSTEMZUGRIFF BESTÃ„TIGEN</button>
    </div>

    <div class="slide" id="slide-roles">
        <h1>OPERATIVE AUTORISIERUNG</h1>
        <p>WÃ¤hlen Sie Ihre strategische Ausrichtung fÃ¼r die 10-Milliarden-Investition.</p>
        <div style="display: flex; gap: 20px; margin-top: 30px;">
            <div class="role-card" onclick="selectRole('junta')">
                <strong style="display:block; margin-bottom:10px;">OBERKOMMANDO</strong>
                <small>Fokus: SouverÃ¤nitÃ¤t. Sicherung der Staatsmacht und Kontrolle Ã¼ber FinanzstrÃ¶me.</small>
            </div>
            <div class="role-card" onclick="selectRole('un')">
                <strong style="display:block; margin-bottom:10px;">INT. ALLIANZ</strong>
                <small>Fokus: Resilienz. Aufbau von Warnsystemen und Logistik zur Katastrophenhilfe.</small>
            </div>
            <div class="role-card" onclick="selectRole('local')">
                <strong style="display:block; margin-bottom:10px;">DELTA-KOMITEE</strong>
                <small>Fokus: Ã–kologie. Schutz des Lebensraums durch Mangroven und lokale Autarkie.</small>
            </div>
        </div>
        <button class="btn btn-gold" style="margin-top: 40px; font-size: 13px;" onclick="selectRole('collective')">KRISENSTAB EINBERUFEN (TRI-PARTITE GRUPPE)</button>
    </div>

    <div class="slide" id="slide-briefing">
        <h1 id="briefing-header">INVESTITIONSBEFEHL</h1>
        <div style="border: 1px dashed var(--highlight); padding: 30px; width: 85%; background: rgba(0, 188, 212, 0.03);">
            <h3 id="briefing-title" style="color: var(--highlight); margin-top:0;"></h3>
            <p id="briefing-text" style="text-align: left;"></p>
        </div>
        <button class="btn" onclick="showSlide('slide-game')">ZUR BUDGETIERUNG</button>
    </div>

    <div class="slide" id="slide-game">
        <div id="budget-counter" class="budget-header">VERFÃœGBARES KAPITAL: 0,0 / 10,0 MRD. USD</div>
        
        <div class="budget-ui">
            <div class="slider-row">
                <span class="slider-label">ðŸ“¡ FrÃ¼hwarn-Netzwerke</span>
                <input type="range" class="val-input" id="inp-warn" value="0" min="0" max="10" oninput="updateBudget()">
                <span class="slider-val">0,0 Mrd.</span>
            </div>
            <div class="slider-row">
                <span class="slider-label">ðŸ§± Mangroven- & KÃ¼stenschutz</span>
                <input type="range" class="val-input" id="inp-protect" value="0" min="0" max="10" oninput="updateBudget()">
                <span class="slider-val">0,0 Mrd.</span>
            </div>
            <div class="slider-row">
                <span class="slider-label">ðŸšš Logistik-Infrastruktur</span>
                <input type="range" class="val-input" id="inp-infra" value="0" min="0" max="10" oninput="updateBudget()">
                <span class="slider-val">0,0 Mrd.</span>
            </div>
            <div style="height: 1px; background: #222; margin: 15px 0;"></div>
            <div class="slider-row">
                <span class="slider-label" style="color: #ff5555;">ðŸ”« MilitÃ¤rische Grenzsicherung</span>
                <input type="range" class="val-input" id="inp-mil" value="0" min="0" max="10" oninput="updateBudget()">
                <span class="slider-val">0,0 Mrd.</span>
            </div>
            <div class="slider-row">
                <span class="slider-label" style="color: #ff5555;">ðŸ“¢ Staatliche Informationshoheit</span>
                <input type="range" class="val-input" id="inp-prop" value="0" min="0" max="10" oninput="updateBudget()">
                <span class="slider-val">0,0 Mrd.</span>
            </div>
        </div>
        <button class="btn" id="submit-btn" onclick="checkSimulation()">STRATEGIE FINALISIEREN</button>
    </div>

    <div class="slide" id="slide-result">
        <img id="outcome-image" src="" alt="Bilanzbericht">
        <div id="role-feedback"></div>
        <div style="display: flex; gap: 20px; margin-top: 30px;">
            <button class="btn" style="font-size: 13px;" onclick="location.reload()">NEUSTART</button>
            <button class="btn btn-gold" id="coll-btn" style="font-size: 13px;" onclick="selectRole('collective')">KRISENSTAB AKTIVIEREN</button>
        </div>
        <div class="ai-credit">Visuals generiert via Google Gemini AI</div>
    </div>

</div>

<script>
    const introText = "LOG-IN: DELTA-STRATEGIE-KOMMANDO\nBETREFF: LANGFRISTIGE PRÃ„VENTION [POST-NARGIS]\n\nDie internationale Gemeinschaft stellt ein Budget von 10 MILLIARDEN US-DOLLAR zur VerfÃ¼gung. Diese Mittel sind fÃ¼r die nÃ¤chsten JAHRZEHNTE gedacht.\n\nIhre Aufgabe ist die Neugestaltung des Deltas. Werden Sie die Natur wiederaufbauen, Mauern aus Beton errichten oder das Geld nutzen, um die politische Kontrolle zu festigen?\n\nIhre Budgetierung entscheidet, ob das Delta beim nÃ¤chsten Zyklon standhÃ¤lt oder untergeht.";

    window.onload = () => {
        let i = 0;
        const container = document.getElementById('intro-text');
        const typing = setInterval(() => {
            if (i < introText.length) {
                container.innerHTML += introText.charAt(i);
                i++;
            } else {
                clearInterval(typing);
                const btn = document.getElementById('intro-btn');
                btn.style.opacity = 1; btn.style.pointerEvents = 'auto';
            }
        }, 15);
    };

    function showSlide(id) {
        document.querySelectorAll('.slide').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
    }

    function selectRole(role) {
        const title = document.getElementById('briefing-title');
        const text = document.getElementById('briefing-text');
        if (role === 'junta') {
            title.innerText = "AUFTRAG: MACHTERHALT & ORDNUNG";
            text.innerText = "Investieren Sie in Grenzsicherung und Informationshoheit. Nur ein starkes Regime kann das Land schÃ¼tzen.";
        } else if (role === 'un') {
            title.innerText = "AUFTRAG: GLOBALE RESILIENZ";
            text.innerText = "Investieren Sie in High-Tech-FrÃ¼hwarnsysteme und Logistik. Wir mÃ¼ssen schneller reagieren kÃ¶nnen.";
        } else if (role === 'local') {
            title.innerText = "AUFTRAG: Ã–KOLOGISCHER SCHUTZWALL";
            text.innerText = "Die Natur ist unser bester Schutz. Investieren Sie in Mangroven und lokale Zyklon-Bunker.";
        } else if (role === 'collective') {
            title.innerText = "AUFTRAG: DER RUNDE TISCH";
            text.innerText = "Finden Sie einen Kompromiss zwischen Macht, Schutz und Rettung.";
        }
        showSlide('slide-briefing');
    }

    function updateBudget() {
        let sum = 0;
        document.querySelectorAll('.val-input').forEach(i => {
            sum += parseInt(i.value);
            i.nextElementSibling.innerText = i.value + ",0 Mrd.";
        });
        const counter = document.getElementById('budget-counter');
        counter.innerText = `VERFÃœGBARES KAPITAL: ${sum.toFixed(1)} / 10,0 MRD. USD`;
        const btn = document.getElementById('submit-btn');
        if (sum > 10) { counter.classList.add('over'); btn.disabled = true; }
        else { counter.classList.remove('over'); btn.disabled = false; }
    }

    function checkSimulation() {
        const warn = parseInt(document.getElementById('inp-warn').value);
        const protect = parseInt(document.getElementById('inp-protect').value);
        const infra = parseInt(document.getElementById('inp-infra').value);
        const mil = parseInt(document.getElementById('inp-mil').value);
        const prop = parseInt(document.getElementById('inp-prop').value);

        let img = ""; let feedback = ""; let color = "";

        // --- PRIORITÃ„TEN-HIERARCHIE ---

        // 1. SECRET ENDING 7: DER ZUSAMMENBRUCH (Sehr schwer)
        if (mil === 0 && prop === 0 && warn >= 4 && infra >= 4) {
            img = "ending7.png"; color = "#ff9800";
            feedback = "DER ZUSAMMENBRUCH: Durch vÃ¶llige Transparenz und Verzicht auf Macht verlor die Junta die Kontrolle. Eine neue Ã„ra beginnt im Chaos.";
        }
        // 2. ENDING 4: DAS MANGROVEN-WUNDER (Siegbedingung nach deinen Vorgaben)
        else if ((protect + warn + infra >= 7) && (protect >= 1 && warn >= 1 && infra >= 1)) {
            img = "ending4.png"; color = "#33ff33";
            feedback = "DAS MANGROVEN-WUNDER: Ãœberragender Erfolg! Die Kombination aus Natur, Technik und Logistik macht das Delta uneinnehmbar fÃ¼r den Sturm.";
        }
        // 3. ENDING 1: DER EISERNE VORHANG
        else if (mil + prop >= 6) {
            img = "ending1.png"; color = "#ff3333";
            feedback = "DER EISERNE VORHANG: Das Geld sicherte die Diktatur. Das Delta bleibt fest im Griff der GenerÃ¤le, aber schutzlos gegen die See.";
        }
        // 4. WEITERE SZENARIEN
        else if (infra >= 5 && warn >= 3) {
            img = "ending5.png"; color = "#ff9800";
            feedback = "EXIL IN DER HEIMAT: Die Menschen Ã¼berleben, aber das Land ist verloren.";
        }
        else if (infra >= 5 && protect <= 1) {
            img = "ending3.png"; color = "#ff3333";
            feedback = "SCHWIMMENDE FRIEDHÃ–FE: Ohne Wellenbrecher versinken alle Rettungswege im Meer.";
        }
        else if (warn >= 6) {
            img = "ending2.png"; color = "#ff3333";
            feedback = "TÃ–DLICHE KLARHEIT: Man sieht das Unheil kommen, kann aber nicht handeln.";
        }
        else if (protect >= 6) {
            img = "ending6.png"; color = "#ff9800";
            feedback = "FESTUNG IM SCHLAMM: Die Mauern halten, aber die Menschen sind isoliert.";
        }
        else {
            img = "ending8.png"; color = "#ff3333";
            feedback = "STAATSVERSAGEN: Ineffizienz und Korruption lieÃŸen das Budget ohne Wirkung verpuffen.";
        }

        document.getElementById('outcome-image').src = "assets/" + img;
        const fb = document.getElementById('role-feedback');
        fb.innerText = feedback; fb.style.color = color;
        showSlide('slide-result');
    }
</script>
</body>
</html>
